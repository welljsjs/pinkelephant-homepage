{"componentChunkName":"component---src-pages-guides-v-3-migration-mdx","path":"/guides/v3-migration/","result":{"pageContext":{"frontmatter":{"title":"V3.0 Migration","description":"Guide for migrating to v3.0 of the theme"},"relativePagePath":"/guides/v3-migration.mdx","titleType":"page","MdxNode":{"id":"e0d59676-2fd4-5671-9ff6-0622d79fa747","children":[],"parent":"3b72658d-8419-514e-a365-06dd1993642a","internal":{"content":"---\ntitle: V3.0 Migration\ndescription: Guide for migrating to v3.0 of the theme\n---\n\n<PageDescription>\n\nCarbon's Gatsby Theme uses version 4 of the Gatsby library. This update combines\nthe control and scalability of server-side rendering with the performance of\nstatic-site generation. The major version change comes with the potential for\nbreaking changes, this guide aims to cover the most likely issues a site built\nwith the Carbon Gatsby theme might encounter. To have the smoothest possible\nexperience, we recommend [upgrading to v2](/guides/v2-migration) of Carbon's\nGatsby Theme first if you haven't already done so.\n\n</PageDescription>\n\n## Breaking changes\n\n1. Bumped minimum version of Gatsby to `v4`\n2. Removed `carbon-components-react` and `carbon-components` in favor of\n   installing `@carbon/react` effectively migrating to Carbon v11.\n\n## Gatsby migration guide\n\nIn this section we'll cover the most likely issues site's built with the Carbon\ngatsby theme might encounter when migrating. If you encounter any issues, or\nyour site leverages more advanced gatsby configuration, check to see if it's\ncovered in the\n[official Gatsby v4 migration guide](https://www.gatsbyjs.com/docs/reference/release-notes/migrating-from-v3-to-v4/).\nTo facilitate an easy upgrade path, we recommend\n[upgrading to v2](/guides/v2-migration) of Carbon's Gatsby Theme first if you\nhaven't already done so.\n\n<InlineNotification>\n\nNote: We'll use yarn for the shell commands here. Replace them with the `npm`\nequivalent if your project uses `npm` as its package manager.\n\n</InlineNotification>\n\n1. Update Gatsby to v4\n   ```\n   yarn add gatsby@latest-v4\n   ```\n2. Update gatsby plugins (including the theme)\n\n   ```\n   yarn upgrade-interactive --latest\n   ```\n\n3. Run `yarn dev:clean` to delete and rebuild your projects development bundle\n\n## Troubleshooting\n\n- Try deleting your node_modules, running `yarn cache clean` and `yarn install`\n  (or `npm cache clean --force` and npm install)\n- Feel free to reach out in the #gatsby-theme-carbon slack channel or open an\n  issue on GitHub\n\n## Carbon v11 migration guide\n\nAs part of this release, the theme has been updated to use Carbon v11. In this\nsection we'll cover the areas that will need to be updated in relation to this\ndependency upgrade.\n\n1. Update your color, motion, and type tokens where appropriate. Use\n   [the migration guide from Github](https://github.com/carbon-design-system/carbon/blob/main/docs/migration/v11.md)\n   for a fantastic token reference guide.\n\n<InlineNotification>\n\nPro tip: When attempting to build your local dev environment, it will usually\nthrow an error because of an old v10 token. Do a search for the v10 token in\nquestion throughout the entire project. Once found, copy it to your clipboard,\nthen switch over to the migration guide on Github. Hit `CMD+F` to search the\npage to find/replace with the corresponding v11 token.\n\n</InlineNotification>\n\n2. Update icon usage\n\nAs part of v11, the usage pattern for icons has changed. Icons are no longer\nimported by size, instead size is configured via the `size` prop. Full details\ncan be found in the\n[Carbon v11 migration guide](https://github.com/carbon-design-system/carbon/blob/main/docs/migration/v11.md#changes-to-size).\n\n<!-- prettier-ignore-start -->\n```md path=Before\nimport { Add32, Add24, Add20, Add16 } from '@carbon/icons-react';\n\nfunction MyComponent() {\n  return (\n    <>\n      <Add32 />\n      <Add24 />\n      <Add20 />\n      <Add16 />\n    </>\n  );\n}\n```\n\n```md path=After\nimport { Add } from '@carbon/icons-react';\n\nfunction MyComponent() {\n  return (\n    <>\n      <Add size={32} />\n      <Add size={24} />\n      <Add size={20} />\n      <Add />\n    </>\n  );\n}\n```\n<!-- prettier-ignore-end -->\n\nA very easy way to make this change is to use the automated migration tool\navailable from the\n[Carbon Upgrade CLI](https://github.com/carbon-design-system/carbon/blob/main/packages/upgrade/README.md#usage).\nYou can run a test of this automated migration against your codebase with the\nfollowing command. When ready to write the changes, additionally pass the `-w`\nflag\n\n```\nnpx @carbon/upgrade migrate icons-react-size-prop\n```\n\n<InlineNotification>\n\nThis automated migration will not rewrite imports in `.mdx` files. Search all\nyour `.mdx` files for `@carbon/icons-react` and manually update their import.\nAdditionally update their usage to include the appropriate `size` prop.\n\n</InlineNotification>\n\n3. Remove any prefix imports. Replace the following in your classnames:\n\n```md path=Before\n<div className={`${prefix}--fancy-class`}>\n```\n\n```md path=After\n<div className='cds--fancy-class'>\n```\n\nThe tips above should get you most, if not all of the way there, but your\nmileage may vary based on how much you have customized your site. If you have\nstill have issues check out the v11 migration guides below.\n\n<Row className=\"resource-card-group\">\n  <Column colMd={4} colLg={4} noGutterSm>\n    <ResourceCard\n      subTitle=\"v11 Migration Guide on Github\"\n      href=\"https://github.com/carbon-design-system/carbon/blob/main/docs/migration/v11.md\"\n      actionIcon=\"launch\"\n      >\n\n![Github icon](/images/github-icon.png)\n\n  </ResourceCard>\n</Column>\n<Column colMd={4} colLg={4} noGutterSm>\n    <ResourceCard\n      subTitle=\"v11 Migration Guide\"\n     href=\"https://carbondesignsystem.com/migrating/guide/develop\"\n      actionIcon=\"launch\"\n      >\n\n  </ResourceCard>\n</Column>\n</Row>\n","type":"Mdx","contentDigest":"36e60a3e18309d6d282a184b4fbb7929","owner":"gatsby-plugin-mdx","counter":176},"frontmatter":{"title":"V3.0 Migration","description":"Guide for migrating to v3.0 of the theme"},"exports":{},"rawBody":"---\ntitle: V3.0 Migration\ndescription: Guide for migrating to v3.0 of the theme\n---\n\n<PageDescription>\n\nCarbon's Gatsby Theme uses version 4 of the Gatsby library. This update combines\nthe control and scalability of server-side rendering with the performance of\nstatic-site generation. The major version change comes with the potential for\nbreaking changes, this guide aims to cover the most likely issues a site built\nwith the Carbon Gatsby theme might encounter. To have the smoothest possible\nexperience, we recommend [upgrading to v2](/guides/v2-migration) of Carbon's\nGatsby Theme first if you haven't already done so.\n\n</PageDescription>\n\n## Breaking changes\n\n1. Bumped minimum version of Gatsby to `v4`\n2. Removed `carbon-components-react` and `carbon-components` in favor of\n   installing `@carbon/react` effectively migrating to Carbon v11.\n\n## Gatsby migration guide\n\nIn this section we'll cover the most likely issues site's built with the Carbon\ngatsby theme might encounter when migrating. If you encounter any issues, or\nyour site leverages more advanced gatsby configuration, check to see if it's\ncovered in the\n[official Gatsby v4 migration guide](https://www.gatsbyjs.com/docs/reference/release-notes/migrating-from-v3-to-v4/).\nTo facilitate an easy upgrade path, we recommend\n[upgrading to v2](/guides/v2-migration) of Carbon's Gatsby Theme first if you\nhaven't already done so.\n\n<InlineNotification>\n\nNote: We'll use yarn for the shell commands here. Replace them with the `npm`\nequivalent if your project uses `npm` as its package manager.\n\n</InlineNotification>\n\n1. Update Gatsby to v4\n   ```\n   yarn add gatsby@latest-v4\n   ```\n2. Update gatsby plugins (including the theme)\n\n   ```\n   yarn upgrade-interactive --latest\n   ```\n\n3. Run `yarn dev:clean` to delete and rebuild your projects development bundle\n\n## Troubleshooting\n\n- Try deleting your node_modules, running `yarn cache clean` and `yarn install`\n  (or `npm cache clean --force` and npm install)\n- Feel free to reach out in the #gatsby-theme-carbon slack channel or open an\n  issue on GitHub\n\n## Carbon v11 migration guide\n\nAs part of this release, the theme has been updated to use Carbon v11. In this\nsection we'll cover the areas that will need to be updated in relation to this\ndependency upgrade.\n\n1. Update your color, motion, and type tokens where appropriate. Use\n   [the migration guide from Github](https://github.com/carbon-design-system/carbon/blob/main/docs/migration/v11.md)\n   for a fantastic token reference guide.\n\n<InlineNotification>\n\nPro tip: When attempting to build your local dev environment, it will usually\nthrow an error because of an old v10 token. Do a search for the v10 token in\nquestion throughout the entire project. Once found, copy it to your clipboard,\nthen switch over to the migration guide on Github. Hit `CMD+F` to search the\npage to find/replace with the corresponding v11 token.\n\n</InlineNotification>\n\n2. Update icon usage\n\nAs part of v11, the usage pattern for icons has changed. Icons are no longer\nimported by size, instead size is configured via the `size` prop. Full details\ncan be found in the\n[Carbon v11 migration guide](https://github.com/carbon-design-system/carbon/blob/main/docs/migration/v11.md#changes-to-size).\n\n<!-- prettier-ignore-start -->\n```md path=Before\nimport { Add32, Add24, Add20, Add16 } from '@carbon/icons-react';\n\nfunction MyComponent() {\n  return (\n    <>\n      <Add32 />\n      <Add24 />\n      <Add20 />\n      <Add16 />\n    </>\n  );\n}\n```\n\n```md path=After\nimport { Add } from '@carbon/icons-react';\n\nfunction MyComponent() {\n  return (\n    <>\n      <Add size={32} />\n      <Add size={24} />\n      <Add size={20} />\n      <Add />\n    </>\n  );\n}\n```\n<!-- prettier-ignore-end -->\n\nA very easy way to make this change is to use the automated migration tool\navailable from the\n[Carbon Upgrade CLI](https://github.com/carbon-design-system/carbon/blob/main/packages/upgrade/README.md#usage).\nYou can run a test of this automated migration against your codebase with the\nfollowing command. When ready to write the changes, additionally pass the `-w`\nflag\n\n```\nnpx @carbon/upgrade migrate icons-react-size-prop\n```\n\n<InlineNotification>\n\nThis automated migration will not rewrite imports in `.mdx` files. Search all\nyour `.mdx` files for `@carbon/icons-react` and manually update their import.\nAdditionally update their usage to include the appropriate `size` prop.\n\n</InlineNotification>\n\n3. Remove any prefix imports. Replace the following in your classnames:\n\n```md path=Before\n<div className={`${prefix}--fancy-class`}>\n```\n\n```md path=After\n<div className='cds--fancy-class'>\n```\n\nThe tips above should get you most, if not all of the way there, but your\nmileage may vary based on how much you have customized your site. If you have\nstill have issues check out the v11 migration guides below.\n\n<Row className=\"resource-card-group\">\n  <Column colMd={4} colLg={4} noGutterSm>\n    <ResourceCard\n      subTitle=\"v11 Migration Guide on Github\"\n      href=\"https://github.com/carbon-design-system/carbon/blob/main/docs/migration/v11.md\"\n      actionIcon=\"launch\"\n      >\n\n![Github icon](/images/github-icon.png)\n\n  </ResourceCard>\n</Column>\n<Column colMd={4} colLg={4} noGutterSm>\n    <ResourceCard\n      subTitle=\"v11 Migration Guide\"\n     href=\"https://carbondesignsystem.com/migrating/guide/develop\"\n      actionIcon=\"launch\"\n      >\n\n  </ResourceCard>\n</Column>\n</Row>\n","fileAbsolutePath":"/Users/juliusschmidt/Documents/Xcode/my-carbon-site/src/pages/guides/v3-migration.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}